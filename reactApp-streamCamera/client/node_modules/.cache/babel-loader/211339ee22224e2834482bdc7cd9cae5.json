{"ast":null,"code":"var _jsxFileName = \"D:\\\\React\\\\reactApp-streamCamera\\\\client\\\\src\\\\Components\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport \"../App.css\";\nimport { useEffect } from \"react\";\nimport axios from \"axios\";\nimport Cookies from \"universal-cookie\";\nimport { Alert, AlertTitle } from \"@mui/material\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst cookies = new Cookies();\n\nconst Login = () => {\n  _s();\n\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  const [error, setError] = React.useState(\"\");\n  const [success, setSuccess] = React.useState(\"\");\n  const navigate = useNavigate();\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      if (!email) return setError(\"Please enter your email address to login\");\n      if (!password) return setError(\"Please enter your password to login\");\n      const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/login`, {\n        email,\n        password\n      });\n      cookies.set(\"accessToken\", res.data.accessToken, {\n        path: \"/\"\n      });\n      cookies.set(\"user\", res.data.user, {\n        path: \"/\"\n      });\n      setSuccess(res.data.message);\n      navigate(\"/\", {\n        replace: true\n      });\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data;\n\n      console.log(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Something went wrong\");\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || \"Server Response Error\");\n    }\n  };\n\n  useEffect(() => {\n    setError(\"\");\n    setSuccess(\"\");\n  }, [email, password]);\n  useEffect(() => {\n    const user = cookies.get(\"user\");\n    if (user) navigate(\"/\", {\n      replace: true\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Login Here\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"email\",\n        children: \"Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Email\",\n        name: \"email\",\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"password\",\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        name: \"password\",\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Log In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"social\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"If you don't have account\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/register\",\n            children: \"Register Here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Alert\",\n      children: [error ? /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"filled\",\n        severity: \"error\",\n        children: [/*#__PURE__*/_jsxDEV(AlertTitle, {\n          children: \"Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this) : null, success ? /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"filled\",\n        severity: \"success\",\n        children: [/*#__PURE__*/_jsxDEV(AlertTitle, {\n          children: \"Success\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"G4e16VRHSZW6OJ8IVyQ/5myRXVw=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useEffect","axios","Cookies","Alert","AlertTitle","Link","useNavigate","cookies","Login","email","setEmail","useState","password","setPassword","error","setError","success","setSuccess","navigate","handleSubmit","e","preventDefault","res","post","process","env","REACT_APP_API_URL","set","data","accessToken","path","user","message","replace","err","console","log","response","get","target","value"],"sources":["D:/React/reactApp-streamCamera/client/src/Components/Login.js"],"sourcesContent":["import React from \"react\";\r\nimport \"../App.css\";\r\nimport { useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Cookies from \"universal-cookie\";\r\nimport { Alert, AlertTitle } from \"@mui/material\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n\r\nconst cookies = new Cookies();\r\n\r\nconst Login = () => {\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n  const [error, setError] = React.useState(\"\");\r\n  const [success, setSuccess] = React.useState(\"\");\r\n\r\n  const navigate = useNavigate();\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (!email) return setError(\"Please enter your email address to login\");\r\n      if (!password) return setError(\"Please enter your password to login\");\r\n\r\n      const res = await axios.post(\r\n        `${process.env.REACT_APP_API_URL}/auth/login`,\r\n        {\r\n          email,\r\n          password,\r\n        }\r\n      );\r\n      cookies.set(\"accessToken\", res.data.accessToken, { path: \"/\" });\r\n      cookies.set(\"user\", res.data.user, { path: \"/\" });\r\n      setSuccess(res.data.message);\r\n      navigate(\"/\", { replace: true });\r\n    } catch (err) {\r\n      console.log(err.response?.data?.message || \"Something went wrong\");\r\n      setError(err.response?.data?.message || \"Server Response Error\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setError(\"\");\r\n    setSuccess(\"\");\r\n  }, [email, password]);\r\n\r\n  useEffect(() => {\r\n    const user = cookies.get(\"user\");\r\n    if (user) navigate(\"/\", { replace: true });\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={handleSubmit}>\r\n        <h3>Login Here</h3>\r\n        <label htmlFor=\"email\">Email</label>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Email\"\r\n          name=\"email\"\r\n          onChange={(e) => setEmail(e.target.value)}\r\n        />\r\n        <label htmlFor=\"password\">Password</label>\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          name=\"password\"\r\n          onChange={(e) => setPassword(e.target.value)}\r\n        />\r\n        <button>Log In</button>\r\n        <div className=\"social\">\r\n          <p>\r\n            If you don't have account{\" \"}\r\n            <Link to={\"/register\"}>Register Here</Link>\r\n          </p>\r\n        </div>\r\n      </form>\r\n      <div className=\"Alert\">\r\n        {error ? (\r\n          <Alert variant=\"filled\" severity=\"error\">\r\n            <AlertTitle>Error</AlertTitle>\r\n            {error}\r\n          </Alert>\r\n        ) : null}\r\n        {success ? (\r\n          <Alert variant=\"filled\" severity=\"success\">\r\n            <AlertTitle>Success</AlertTitle>\r\n            {error}\r\n          </Alert>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}